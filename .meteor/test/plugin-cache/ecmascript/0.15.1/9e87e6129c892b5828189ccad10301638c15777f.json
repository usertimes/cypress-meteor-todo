{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/ui/App.js","filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","inputSourceMap":{"version":3,"sources":["imports/ui/App.js"],"names":["Meteor","React","useState","Fragment","useTracker","TasksCollection","Task","TaskForm","LoginForm","toggleChecked","_id","isChecked","call","deleteTask","App","user","hideCompleted","setHideCompleted","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","tasks","pendingTasksCount","isLoading","noDataAvailable","handler","subscribe","ready","find","sort","createdAt","fetch","count","pendingTasksTitle","logout","username","map","task"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              ğŸ“ï¸ To Do List\n              {pendingTasksTitle}\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} ğŸšª\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map(task => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"test","cwd":"/Users/idrismahjoubi/cypress-meteor-react","root":"/Users/idrismahjoubi/cypress-meteor-react","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/App.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  App: () => App\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, useState, Fragment;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useState(v) {\n    useState = v;\n  },\n\n  Fragment(v) {\n    Fragment = v;\n  }\n\n}, 1);\nlet useTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  useTracker(v) {\n    useTracker = v;\n  }\n\n}, 2);\nlet TasksCollection;\nmodule.link(\"/imports/db/TasksCollection\", {\n  TasksCollection(v) {\n    TasksCollection = v;\n  }\n\n}, 3);\nlet Task;\nmodule.link(\"./Task\", {\n  Task(v) {\n    Task = v;\n  }\n\n}, 4);\nlet TaskForm;\nmodule.link(\"./TaskForm\", {\n  TaskForm(v) {\n    TaskForm = v;\n  }\n\n}, 5);\nlet LoginForm;\nmodule.link(\"./LoginForm\", {\n  LoginForm(v) {\n    LoginForm = v;\n  }\n\n}, 6);\n\nconst toggleChecked = (_ref) => {\n  let {\n    _id,\n    isChecked\n  } = _ref;\n  return Meteor.call('tasks.setIsChecked', _id, !isChecked);\n};\n\nconst deleteTask = (_ref2) => {\n  let {\n    _id\n  } = _ref2;\n  return Meteor.call('tasks.remove', _id);\n};\n\nconst App = () => {\n  const user = useTracker(() => Meteor.user());\n  const [hideCompleted, setHideCompleted] = useState(false);\n  const hideCompletedFilter = {\n    isChecked: {\n      $ne: true\n    }\n  };\n  const userFilter = user ? {\n    userId: user._id\n  } : {};\n\n  const pendingOnlyFilter = _objectSpread(_objectSpread({}, hideCompletedFilter), userFilter);\n\n  const {\n    tasks,\n    pendingTasksCount,\n    isLoading\n  } = useTracker(() => {\n    const noDataAvailable = {\n      tasks: [],\n      pendingTasksCount: 0\n    };\n\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return _objectSpread(_objectSpread({}, noDataAvailable), {}, {\n        isLoading: true\n      });\n    }\n\n    const tasks = TasksCollection.find(hideCompleted ? pendingOnlyFilter : userFilter, {\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n    return {\n      tasks,\n      pendingTasksCount\n    };\n  });\n  const pendingTasksTitle = \"\".concat(pendingTasksCount ? \" (\".concat(pendingTasksCount, \")\") : '');\n\n  const logout = () => Meteor.logout();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\"\n  }, /*#__PURE__*/React.createElement(\"header\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-header\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"\\uD83D\\uDCDD\\uFE0F To Do List\", pendingTasksTitle)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\"\n  }, user ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user\",\n    onClick: logout\n  }, user.username, \" \\uD83D\\uDEAA\"), /*#__PURE__*/React.createElement(TaskForm, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setHideCompleted(!hideCompleted)\n  }, hideCompleted ? 'Show All' : 'Hide Completed')), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\"\n  }, \"loading...\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"tasks\"\n  }, tasks.map(task => /*#__PURE__*/React.createElement(Task, {\n    key: task._id,\n    task: task,\n    onCheckboxClick: toggleChecked,\n    onDeleteClick: deleteTask\n  })))) : /*#__PURE__*/React.createElement(LoginForm, null)));\n};","map":{"version":3,"sources":["imports/ui/App.js"],"names":["Meteor","toggleChecked","isChecked","deleteTask","_id","App","user","useTracker","useState","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","isLoading","noDataAvailable","tasks","pendingTasksCount","handler","hideCompleted","sort","createdAt","TasksCollection","pendingTasksTitle","logout","setHideCompleted","task"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              ğŸ“ï¸ To Do List\n              {pendingTasksTitle}\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} ğŸšª\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map(task => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"sourceType":"module","hash":"9e87e6129c892b5828189ccad10301638c15777f"}
