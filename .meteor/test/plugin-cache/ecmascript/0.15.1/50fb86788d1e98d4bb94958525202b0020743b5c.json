{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"imports/ui/App.js","filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"test","cwd":"/Users/idrismahjoubi/cypress-meteor-react","root":"/Users/idrismahjoubi/cypress-meteor-react","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/App.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  App: () => App\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet React, useState, Fragment;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  useState(v) {\n    useState = v;\n  },\n\n  Fragment(v) {\n    Fragment = v;\n  }\n\n}, 1);\nlet useTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  useTracker(v) {\n    useTracker = v;\n  }\n\n}, 2);\nlet TasksCollection;\nmodule.link(\"/imports/db/TasksCollection\", {\n  TasksCollection(v) {\n    TasksCollection = v;\n  }\n\n}, 3);\nlet Task;\nmodule.link(\"./Task\", {\n  Task(v) {\n    Task = v;\n  }\n\n}, 4);\nlet TaskForm;\nmodule.link(\"./TaskForm\", {\n  TaskForm(v) {\n    TaskForm = v;\n  }\n\n}, 5);\nlet LoginForm;\nmodule.link(\"./LoginForm\", {\n  LoginForm(v) {\n    LoginForm = v;\n  }\n\n}, 6);\n\nconst toggleChecked = (_ref) => {\n  let {\n    _id,\n    isChecked\n  } = _ref;\n  return Meteor.call('tasks.setIsChecked', _id, !isChecked);\n};\n\nconst deleteTask = (_ref2) => {\n  let {\n    _id\n  } = _ref2;\n  return Meteor.call('tasks.remove', _id);\n};\n\nconst App = () => {\n  const user = useTracker(() => Meteor.user());\n  const [hideCompleted, setHideCompleted] = useState(false);\n  const hideCompletedFilter = {\n    isChecked: {\n      $ne: true\n    }\n  };\n  const userFilter = user ? {\n    userId: user._id\n  } : {};\n\n  const pendingOnlyFilter = _objectSpread(_objectSpread({}, hideCompletedFilter), userFilter);\n\n  const {\n    tasks,\n    pendingTasksCount,\n    isLoading\n  } = useTracker(() => {\n    const noDataAvailable = {\n      tasks: [],\n      pendingTasksCount: 0\n    };\n\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return _objectSpread(_objectSpread({}, noDataAvailable), {}, {\n        isLoading: true\n      });\n    }\n\n    const tasks = TasksCollection.find(hideCompleted ? pendingOnlyFilter : userFilter, {\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n    return {\n      tasks,\n      pendingTasksCount\n    };\n  });\n  const pendingTasksTitle = \"\".concat(pendingTasksCount ? \" (\".concat(pendingTasksCount, \")\") : '');\n\n  const logout = () => Meteor.logout();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\"\n  }, /*#__PURE__*/React.createElement(\"header\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-header\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"\\uD83D\\uDCDD\\uFE0F To Do List\", pendingTasksTitle)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\"\n  }, user ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user\",\n    onClick: logout\n  }, user.username, \" \\uD83D\\uDEAA\"), /*#__PURE__*/React.createElement(TaskForm, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => setHideCompleted(!hideCompleted)\n  }, hideCompleted ? 'Show All' : 'Hide Completed')), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\"\n  }, \"loading...\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"tasks\"\n  }, tasks.map(task => /*#__PURE__*/React.createElement(Task, {\n    key: task._id,\n    task: task,\n    onCheckboxClick: toggleChecked,\n    onDeleteClick: deleteTask\n  })))) : /*#__PURE__*/React.createElement(LoginForm, null)));\n};","map":{"version":3,"sources":["imports/ui/App.js"],"names":["_objectSpread","module","link","default","v","export","App","Meteor","React","useState","Fragment","useTracker","TasksCollection","Task","TaskForm","LoginForm","toggleChecked","_id","isChecked","call","deleteTask","user","hideCompleted","setHideCompleted","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","tasks","pendingTasksCount","isLoading","noDataAvailable","handler","subscribe","ready","find","sort","createdAt","fetch","count","pendingTasksTitle","logout","username","map","task"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              📝️ To Do List\n              {pendingTasksTitle}\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} 🚪\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map(task => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"sourceType":"module","hash":"50fb86788d1e98d4bb94958525202b0020743b5c"}
