{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/App.js","filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","inputSourceMap":{"version":3,"sources":["imports/ui/App.js"],"names":["Meteor","React","useState","Fragment","useTracker","TasksCollection","Task","TaskForm","LoginForm","toggleChecked","_id","isChecked","call","deleteTask","App","user","hideCompleted","setHideCompleted","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","tasks","pendingTasksCount","isLoading","noDataAvailable","handler","subscribe","ready","find","sort","createdAt","fetch","count","pendingTasksTitle","logout","username","map","task"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              üìùÔ∏è To Do List\n              {pendingTasksTitle}\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} üö™\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map(task => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"test","cwd":"/Users/idrismahjoubi/cypress-meteor-react","root":"/Users/idrismahjoubi/cypress-meteor-react","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/App.js"}},"code":"var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nmodule.export({\n  App: function () {\n    return App;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar React, useState, Fragment;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  Fragment: function (v) {\n    Fragment = v;\n  }\n}, 1);\nvar useTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  useTracker: function (v) {\n    useTracker = v;\n  }\n}, 2);\nvar TasksCollection;\nmodule.link(\"/imports/db/TasksCollection\", {\n  TasksCollection: function (v) {\n    TasksCollection = v;\n  }\n}, 3);\nvar Task;\nmodule.link(\"./Task\", {\n  Task: function (v) {\n    Task = v;\n  }\n}, 4);\nvar TaskForm;\nmodule.link(\"./TaskForm\", {\n  TaskForm: function (v) {\n    TaskForm = v;\n  }\n}, 5);\nvar LoginForm;\nmodule.link(\"./LoginForm\", {\n  LoginForm: function (v) {\n    LoginForm = v;\n  }\n}, 6);\n\nvar toggleChecked = function (_ref) {\n  var _id = _ref._id,\n      isChecked = _ref.isChecked;\n  return Meteor.call('tasks.setIsChecked', _id, !isChecked);\n};\n\nvar deleteTask = function (_ref2) {\n  var _id = _ref2._id;\n  return Meteor.call('tasks.remove', _id);\n};\n\nvar App = function () {\n  var user = useTracker(function () {\n    return Meteor.user();\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hideCompleted = _useState2[0],\n      setHideCompleted = _useState2[1];\n\n  var hideCompletedFilter = {\n    isChecked: {\n      $ne: true\n    }\n  };\n  var userFilter = user ? {\n    userId: user._id\n  } : {};\n\n  var pendingOnlyFilter = _objectSpread(_objectSpread({}, hideCompletedFilter), userFilter);\n\n  var _useTracker = useTracker(function () {\n    var noDataAvailable = {\n      tasks: [],\n      pendingTasksCount: 0\n    };\n\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n\n    var handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return _objectSpread(_objectSpread({}, noDataAvailable), {}, {\n        isLoading: true\n      });\n    }\n\n    var tasks = TasksCollection.find(hideCompleted ? pendingOnlyFilter : userFilter, {\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    var pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n    return {\n      tasks: tasks,\n      pendingTasksCount: pendingTasksCount\n    };\n  }),\n      tasks = _useTracker.tasks,\n      pendingTasksCount = _useTracker.pendingTasksCount,\n      isLoading = _useTracker.isLoading;\n\n  var pendingTasksTitle = \"\" + (pendingTasksCount ? \" (\" + pendingTasksCount + \")\" : '');\n\n  var logout = function () {\n    return Meteor.logout();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\"\n  }, /*#__PURE__*/React.createElement(\"header\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-header\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"\\uD83D\\uDCDD\\uFE0F To Do List\", pendingTasksTitle)))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\"\n  }, user ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user\",\n    onClick: logout\n  }, user.username, \" \\uD83D\\uDEAA\"), /*#__PURE__*/React.createElement(TaskForm, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function () {\n      return setHideCompleted(!hideCompleted);\n    }\n  }, hideCompleted ? 'Show All' : 'Hide Completed')), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\"\n  }, \"loading...\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"tasks\"\n  }, tasks.map(function (task) {\n    return /*#__PURE__*/React.createElement(Task, {\n      key: task._id,\n      task: task,\n      onCheckboxClick: toggleChecked,\n      onDeleteClick: deleteTask\n    });\n  }))) : /*#__PURE__*/React.createElement(LoginForm, null)));\n};","map":{"version":3,"sources":["imports/ui/App.js"],"names":["Meteor","toggleChecked","isChecked","deleteTask","_id","App","user","useTracker","useState","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","isLoading","noDataAvailable","tasks","pendingTasksCount","handler","hideCompleted","sort","createdAt","TasksCollection","pendingTasksTitle","logout","setHideCompleted","task"],"mappings":"AAAA,IAAA,aAAA;;AAAA,MAAuB,CAAA,IAAvB,CAAuB,sCAAvB,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,aAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;;AAAA,IAAA,cAAA;;AAAA,MAAA,CAAA,IAAA,CAAA,sCAAA,EAAA;AAAA,EAAA,OAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,cAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,MAAA,CAAA,MAAA,CAASA;AAAT,EAAA,GAAA,EAAA,YAAuB;AAAA,WAAvB,GAAuB;AAAvB;AAASA,CAAT;AAAA,IAAA,MAAA;AAAA,MAAA,CAAA,IAAA,CAAA,eAAA,EAAA;AAAA,EAAA,MAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,MAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,KAAA,EAAA,QAAA,EAAA,QAAA;AAAA,MAAA,CAAA,IAAA,CAAA,OAAA,EAAA;AAAA,aAAA,UAAA,CAAA,EAAA;AAAA,IAAA,KAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA,GAAA;AAAA,EAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,UAAA;AAAA,MAAA,CAAA,IAAA,CAAA,0BAAA,EAAA;AAAA,EAAA,UAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,UAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,eAAA;AAAA,MAAA,CAAA,IAAA,CAAA,6BAAA,EAAA;AAAA,EAAA,eAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,eAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,IAAA;AAAA,MAAA,CAAA,IAAA,CAAA,QAAA,EAAA;AAAA,EAAA,IAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,IAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,QAAA;AAAA,MAAA,CAAA,IAAA,CAAA,YAAA,EAAA;AAAA,EAAA,QAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;AAAA,IAAA,SAAA;AAAA,MAAA,CAAA,IAAA,CAAA,aAAA,EAAA;AAAA,EAAA,SAAA,EAAA,UAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA;AAAA,CAAA,EAAA,CAAA;;AAQA,IAAMC,aAAa,GAAG;AAAA,MAAC,GAAD,QAAC,GAAD;AAAA,MAAQC,SAAR,QAAQA,SAAR;AAAA,SACpBF,MAAM,CAANA,IAAAA,CAAAA,oBAAAA,EAAAA,GAAAA,EAAuC,CADzC,SACEA,CADoB;AAAA,CAAtB;;AAGA,IAAMG,UAAU,GAAG;AAAA,MAAGC,GAAH,SAAGA,GAAH;AAAA,SAAaJ,MAAM,CAANA,IAAAA,CAAAA,cAAAA,EAAhC,GAAgCA,CAAb;AAAA,CAAnB;;AAEO,IAAMK,GAAG,GAAG,YAAM;AACvB,MAAMC,IAAI,GAAGC,UAAU,CAAC;AAAA,WAAMP,MAAM,CAApC,IAA8BA,EAAN;AAAA,GAAD,CAAvB;;AADuB,kBAGmBQ,QAAQ,CAAlD,KAAkD,CAH3B;AAAA;AAAA,MAGjB,aAHiB;AAAA,MAGjB,gBAHiB;;AAKvB,MAAMC,mBAAmB,GAAG;AAAEP,IAAAA,SAAS,EAAE;AAAEQ,MAAAA,GAAG,EAAE;AAAP;AAAb,GAA5B;AAEA,MAAMC,UAAU,GAAGL,IAAI,GAAG;AAAEM,IAAAA,MAAM,EAAEN,IAAI,CAACF;AAAf,GAAH,GAAvB,EAAA;;AAEA,MAAMS,iBAAiB,mCAAG,mBAAH,GAAgCF,UAAhC,CAAvB;;AATuB,oBAWyBJ,UAAU,CAAC,YAAM;AAC/D,QAAMQ,eAAe,GAAG;AAAEC,MAAAA,KAAK,EAAP,EAAA;AAAaC,MAAAA,iBAAiB,EAAE;AAAhC,KAAxB;;AACA,QAAI,CAACjB,MAAM,CAAX,IAAKA,EAAL,EAAoB;AAClB,aAAA,eAAA;AACD;;AACD,QAAMkB,OAAO,GAAGlB,MAAM,CAANA,SAAAA,CAAhB,OAAgBA,CAAhB;;AAEA,QAAI,CAACkB,OAAO,CAAZ,KAAKA,EAAL,EAAsB;AACpB,6CAAO,eAAP;AAA6BJ,QAAAA,SAAS,EAAE;AAAxC;AACD;;AAED,QAAME,KAAK,GAAG,eAAe,CAAf,IAAA,CACZG,aAAa,GAAA,iBAAA,GADD,UAAA,EAEZ;AACEC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,SAAS,EAAE,CAAC;AAAd;AADR,KAFY,EAAd,KAAc,EAAd;AAMA,QAAMJ,iBAAiB,GAAGK,eAAe,CAAfA,IAAAA,CAAAA,iBAAAA,EAA1B,KAA0BA,EAA1B;AAEA,WAAO;AAAEN,MAAAA,KAAF,EAAEA,KAAF;AAASC,MAAAA,iBAAAA,EAAAA;AAAT,KAAP;AAnBF,GAA0D,CAXnC;AAAA,MAWjB,KAXiB,eAWjB,KAXiB;AAAA,MAWjB,iBAXiB,eAWjB,iBAXiB;AAAA,MAWWH,SAXX,eAWWA,SAXX;;AAiCvB,MAAMS,iBAAiB,SACrBN,iBAAiB,UAAA,iBAAA,SADnB,EAAuB,CAAvB;;AAIA,MAAMO,MAAM,GAAG;AAAA,WAAMxB,MAAM,CAA3B,MAAqBA,EAAN;AAAA,GAAf;;AAEA,sBACE;AAAK,IAAA,SAAA,EAAL;AAAA,kBACE,iDACE;AAAK,IAAA,SAAA,EAAL;AAAA,kBACE;AAAK,IAAA,SAAA,EAAL;AAAA,kBACE,iEAEE,iBAFF,CADF,CADF,CADF,CADF,eAYE;AAAK,IAAA,SAAA,EAAL;AAAA,KACGM,IAAI,gBACH,oBAAA,QAAA,qBACE;AAAK,IAAA,SAAA,EAAL,MAAA;AAAsB,IAAA,OAAA,EAAtB;AAAA,KACGA,IAAI,CAAL,QADF,kBADF,eAKE,oBAAA,QAAA,OALF,eAOE;AAAK,IAAA,SAAA,EAAL;AAAA,kBACE;AAAQ,IAAA,OAAA,EAAS;AAAA,aAAMmB,gBAAgB,CAAC,CAAxC,aAAuC,CAAtB;AAAA;AAAjB,KACGN,aAAa,GAAA,UAAA,GAAd,gBADF,CADF,CAPF,EAaGL,SAAS,iBAAI;AAAK,IAAA,SAAA,EAAnB;AAAc,kBAbhB,eAeE;AAAI,IAAA,SAAA,EAAJ;AAAA,KACGE,KAAK,CAALA,GAAAA,CAAUU,UAAAA,IAAI;AAAA,wBACb,oBAAA,IAAA;AACE,MAAA,GAAA,EAAKA,IAAI,CADX,GAAA;AAEE,MAAA,IAAA,EAFF,IAAA;AAGE,MAAA,eAAA,EAHF,aAAA;AAIE,MAAA,aAAA,EALJ;AACE,MADa;AAAA,GAAdV,CADH,CAfF,CADG,gBA4BH,oBA5BF,SA4BE,OA7BJ,CAZF,CADF;AAvCK,CAAA","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              üìùÔ∏è To Do List\n              {pendingTasksTitle}\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} üö™\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map(task => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"sourceType":"module","hash":"72f28f06bdd5b13a479c5ce3877331417b7324e9"}
