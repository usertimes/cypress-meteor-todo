{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"imports/ui/App.js","filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"test","cwd":"/Users/idrismahjoubi/cypress-meteor-react","root":"/Users/idrismahjoubi/cypress-meteor-react","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.13.10","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/idrismahjoubi/cypress-meteor-react/imports/ui/App.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"imports/ui/App.js"}},"code":"var _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default: function (v) {\n    _objectSpread = v;\n  }\n}, 0);\n\nvar _slicedToArray;\n\nmodule.link(\"@babel/runtime/helpers/slicedToArray\", {\n  default: function (v) {\n    _slicedToArray = v;\n  }\n}, 1);\nmodule.export({\n  App: function () {\n    return App;\n  }\n});\nvar Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor: function (v) {\n    Meteor = v;\n  }\n}, 0);\nvar React, useState, Fragment;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  },\n  useState: function (v) {\n    useState = v;\n  },\n  Fragment: function (v) {\n    Fragment = v;\n  }\n}, 1);\nvar useTracker;\nmodule.link(\"meteor/react-meteor-data\", {\n  useTracker: function (v) {\n    useTracker = v;\n  }\n}, 2);\nvar TasksCollection;\nmodule.link(\"/imports/db/TasksCollection\", {\n  TasksCollection: function (v) {\n    TasksCollection = v;\n  }\n}, 3);\nvar Task;\nmodule.link(\"./Task\", {\n  Task: function (v) {\n    Task = v;\n  }\n}, 4);\nvar TaskForm;\nmodule.link(\"./TaskForm\", {\n  TaskForm: function (v) {\n    TaskForm = v;\n  }\n}, 5);\nvar LoginForm;\nmodule.link(\"./LoginForm\", {\n  LoginForm: function (v) {\n    LoginForm = v;\n  }\n}, 6);\nvar testProp, COUNTER;\nmodule.link(\"../testIds\", {\n  testProp: function (v) {\n    testProp = v;\n  },\n  COUNTER: function (v) {\n    COUNTER = v;\n  }\n}, 7);\n\nvar toggleChecked = function (_ref) {\n  var _id = _ref._id,\n      isChecked = _ref.isChecked;\n  return Meteor.call('tasks.setIsChecked', _id, !isChecked);\n};\n\nvar deleteTask = function (_ref2) {\n  var _id = _ref2._id;\n  return Meteor.call('tasks.remove', _id);\n};\n\nvar App = function () {\n  var user = useTracker(function () {\n    return Meteor.user();\n  });\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      hideCompleted = _useState2[0],\n      setHideCompleted = _useState2[1];\n\n  var hideCompletedFilter = {\n    isChecked: {\n      $ne: true\n    }\n  };\n  var userFilter = user ? {\n    userId: user._id\n  } : {};\n\n  var pendingOnlyFilter = _objectSpread(_objectSpread({}, hideCompletedFilter), userFilter);\n\n  var _useTracker = useTracker(function () {\n    var noDataAvailable = {\n      tasks: [],\n      pendingTasksCount: 0\n    };\n\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n\n    var handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return _objectSpread(_objectSpread({}, noDataAvailable), {}, {\n        isLoading: true\n      });\n    }\n\n    var tasks = TasksCollection.find(hideCompleted ? pendingOnlyFilter : userFilter, {\n      sort: {\n        createdAt: -1\n      }\n    }).fetch();\n    var pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n    return {\n      tasks: tasks,\n      pendingTasksCount: pendingTasksCount\n    };\n  }),\n      tasks = _useTracker.tasks,\n      pendingTasksCount = _useTracker.pendingTasksCount,\n      isLoading = _useTracker.isLoading;\n\n  var pendingTasksTitle = \"\" + (pendingTasksCount ? \" (\" + pendingTasksCount + \")\" : '');\n\n  var logout = function () {\n    return Meteor.logout();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app\"\n  }, /*#__PURE__*/React.createElement(\"header\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"app-header\"\n  }, /*#__PURE__*/React.createElement(\"h1\", null, \"\\uD83D\\uDCDD\\uFE0F To Do List\", /*#__PURE__*/React.createElement(\"span\", testProp(COUNTER), \" \", pendingTasksTitle, \" \"))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\"\n  }, user ? /*#__PURE__*/React.createElement(Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user\",\n    onClick: logout\n  }, user.username, \" \\uD83D\\uDEAA\"), /*#__PURE__*/React.createElement(TaskForm, null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"filter\"\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: function () {\n      return setHideCompleted(!hideCompleted);\n    }\n  }, hideCompleted ? 'Show All' : 'Hide Completed')), isLoading && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"loading\"\n  }, \"loading...\"), /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"tasks\"\n  }, tasks.map(function (task) {\n    return /*#__PURE__*/React.createElement(Task, {\n      key: task._id,\n      task: task,\n      onCheckboxClick: toggleChecked,\n      onDeleteClick: deleteTask\n    });\n  }))) : /*#__PURE__*/React.createElement(LoginForm, null)));\n};","map":{"version":3,"sources":["imports/ui/App.js"],"names":["_objectSpread","module","link","default","v","_slicedToArray","export","App","Meteor","React","useState","Fragment","useTracker","TasksCollection","Task","TaskForm","LoginForm","testProp","COUNTER","toggleChecked","_id","isChecked","call","deleteTask","user","hideCompleted","setHideCompleted","hideCompletedFilter","$ne","userFilter","userId","pendingOnlyFilter","noDataAvailable","tasks","pendingTasksCount","handler","subscribe","ready","isLoading","find","sort","createdAt","fetch","count","pendingTasksTitle","logout","username","map","task"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport React, { useState, Fragment } from 'react';\nimport { useTracker } from 'meteor/react-meteor-data';\nimport { TasksCollection } from '/imports/db/TasksCollection';\nimport { Task } from './Task';\nimport { TaskForm } from './TaskForm';\nimport { LoginForm } from './LoginForm';\nimport { testProp,COUNTER } from '../testIds';\n\nconst toggleChecked = ({ _id, isChecked }) =>\n  Meteor.call('tasks.setIsChecked', _id, !isChecked);\n\nconst deleteTask = ({ _id }) => Meteor.call('tasks.remove', _id);\n\nexport const App = () => {\n  const user = useTracker(() => Meteor.user());\n\n  const [hideCompleted, setHideCompleted] = useState(false);\n\n  const hideCompletedFilter = { isChecked: { $ne: true } };\n\n  const userFilter = user ? { userId: user._id } : {};\n\n  const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };\n\n  const { tasks, pendingTasksCount, isLoading } = useTracker(() => {\n    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };\n    if (!Meteor.user()) {\n      return noDataAvailable;\n    }\n    const handler = Meteor.subscribe('tasks');\n\n    if (!handler.ready()) {\n      return { ...noDataAvailable, isLoading: true };\n    }\n\n    const tasks = TasksCollection.find(\n      hideCompleted ? pendingOnlyFilter : userFilter,\n      {\n        sort: { createdAt: -1 },\n      }\n    ).fetch();\n    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();\n\n    return { tasks, pendingTasksCount };\n  });\n\n  const pendingTasksTitle = `${\n    pendingTasksCount ? ` (${pendingTasksCount})` : ''\n  }`;\n\n  const logout = () => Meteor.logout();\n\n  return (\n    <div className=\"app\">\n      <header>\n        <div className=\"app-bar\">\n          <div className=\"app-header\">\n            <h1>\n              📝️ To Do List\n              <span {...testProp(COUNTER)}> {pendingTasksTitle} </span>\n            </h1>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"main\">\n        {user ? (\n          <Fragment>\n            <div className=\"user\" onClick={logout}>\n              {user.username} 🚪\n            </div>\n\n            <TaskForm />\n\n            <div className=\"filter\">\n              <button onClick={() => setHideCompleted(!hideCompleted)}>\n                {hideCompleted ? 'Show All' : 'Hide Completed'}\n              </button>\n            </div>\n\n            {isLoading && <div className=\"loading\">loading...</div>}\n\n            <ul className=\"tasks\">\n              {tasks.map((task) => (\n                <Task\n                  key={task._id}\n                  task={task}\n                  onCheckboxClick={toggleChecked}\n                  onDeleteClick={deleteTask}\n                />\n              ))}\n            </ul>\n          </Fragment>\n        ) : (\n          <LoginForm />\n        )}\n      </div>\n    </div>\n  );\n};\n"]},"sourceType":"module","hash":"87a756a2519686ae8cbbbecb05426dd60dc9163d"}
